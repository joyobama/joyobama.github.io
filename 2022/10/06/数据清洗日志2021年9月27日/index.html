<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>数据清洗日志2021年9月27日 | Time is Gone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="数据分析通过notepad++打开数据csv文件，经过文本匹配后，未匹配到0xFF，0xFE字符，故导入matlab中NaN元素基本为缺失元素。  导入matlab后，对缺失数据进行统计，统计数据如下表所示，行是各项属性，列是车辆编号，表中数值为NaN，即缺失元素数量，18行为为每辆车的数据量。  利用二维图像显示如下图所示，属性11(电池单体最低电压)，属性12(电池单体最高电压)，属性13(电">
<meta property="og:type" content="article">
<meta property="og:title" content="数据清洗日志2021年9月27日">
<meta property="og:url" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/index.html">
<meta property="og:site_name" content="Time is Gone">
<meta property="og:description" content="数据分析通过notepad++打开数据csv文件，经过文本匹配后，未匹配到0xFF，0xFE字符，故导入matlab中NaN元素基本为缺失元素。  导入matlab后，对缺失数据进行统计，统计数据如下表所示，行是各项属性，列是车辆编号，表中数值为NaN，即缺失元素数量，18行为为每辆车的数据量。  利用二维图像显示如下图所示，属性11(电池单体最低电压)，属性12(电池单体最高电压)，属性13(电">
<meta property="og:locale">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927172327404.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927210055823.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927202630632.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927204220823.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927203338006.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927211138399.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210928102038893.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%861%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%861%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%862%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%862%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%863%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%863%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%863%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF2.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%864%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%864%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%865%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%865%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%866%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%866%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%866%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF2.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%867%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%867%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%867%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF7.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%868%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%868%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%869%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF-16328329623001.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%869%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF-16328329731242.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%8610%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/Desktop/data/%E8%BD%A6%E8%BE%8610%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E8%BD%A6%E8%BE%8610%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF2.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E6%97%A5%E6%9C%9F%E5%BA%8F%E5%88%97%E5%8F%98%E5%8C%96%E5%9B%BE.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210929173356906.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/%E7%A7%92%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%B1%80%E9%83%A8%E5%9B%BE.png">
<meta property="og:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210929175735962.png">
<meta property="article:published_time" content="2022-10-06T13:00:15.673Z">
<meta property="article:modified_time" content="2021-09-29T11:57:49.537Z">
<meta property="article:author" content="Joy_Obama">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/image-20210927172327404.png">
  
    <link rel="alternate" href="/atom.xml" title="Time is Gone" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Time is Gone</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Joy_Obama</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://joyobama.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-数据清洗日志2021年9月27日" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/" class="article-date">
  <time class="dt-published" datetime="2022-10-06T13:00:15.673Z" itemprop="datePublished">2022-10-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      数据清洗日志2021年9月27日
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h4><p>通过notepad++打开数据csv文件，经过文本匹配后，未匹配到0xFF，0xFE字符，故导入matlab中NaN元素基本为缺失元素。</p>
<hr>
<p>导入matlab后，对缺失数据进行统计，统计数据如下表所示，行是各项属性，列是车辆编号，表中数值为NaN，即缺失元素数量，18行为为每辆车的数据量。</p>
<p><img src="image-20210927172327404.png" alt="image-20210927172327404"></p>
<p>利用二维图像显示如下图所示，属性11(电池单体最低电压)，属性12(电池单体最高电压)，属性13(电池单体最高温度)数据缺失最为严重，其次是属性7(里程数)以及属性6(速度)。车辆4数据丢失比例最高，其次是车辆1，车辆2，综合考虑，车辆4数据不予考虑，补齐数据难度太大，同样的车辆1，车辆2缺失比例太高了，补齐之后的数据可靠性比较低，收益太小，放弃。数据补齐工作重点放在车辆3，5，6，7，8；车辆9数据量少但贵在全面，可用于做测试样本，车辆10，数据丢失比例小，但数据量基数太大，数据补齐有一定困难，但不失为重要的训练样本。</p>
<p><img src="image-20210927210055823.png" alt="image-20210927210055823"><img src="image-20210927202630632.png" alt="image-20210927202630632"></p>
<p>数据缺失数量图</p>
<p><img src="image-20210927204220823.png" alt="image-20210927204220823"><img src="image-20210927203338006.png" alt="image-20210927203338006"></p>
<p>数据缺失比例</p>
<hr>
<p>通过以上分析可以发现车辆7数据样本基数较多，同时数据丢失量较少，故从车辆7开始入手处理。车辆7丢失数据如下图所示。</p>
<p><img src="image-20210927211138399.png" alt="image-20210927211138399"></p>
<p>属性1为车辆ID，显示NaN为格式转换问题，缺失数据在属性4上，属性4为充电状态，分为：</p>
<ol>
<li>停车充电</li>
<li>行驶充电</li>
<li>未充电状态</li>
<li>异常或无效</li>
</ol>
<p>属性3为车辆状态，1为启动状态，2为熄火状态；属性9为电池总电流状态，根据属性3可知缺失数据为行驶充电或未充电状态，而根据属性9，电流为负则为充电，电流为正则为放电，故可以较为容易的补齐数据。</p>
<hr>
<p>通过对车辆7的分析，发现属性4数据是线性相关的，可以通过其他数据计算得出。观察车辆3数据缺失情况，数据缺失基本上是存在于属性4，以及零散的属性7(里程)，属性11(电池单体最高电压)，属性12(电池单体最低电压)。通过查找定位属性7的缺失数据位置，如下图所示，属性11，属性12缺失数据在同一时刻，故除了补全之外，可直接删除这一数据样本。但根据实际情况，里程数可根据速度以及时间间隔求出，电池单体最高，最低电压，一般与前后时刻一致或线性相关。</p>
<p><img src="image-20210928102038893.png" alt="image-20210928102038893"></p>
<p>而在观察前后数据进行补全时，前后时间间隔差距较大，进一步进行观察时间变化规律。观察时间变化规律需要将时刻属性进行数据的格式转换。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sec</span> = <span class="title">date2sec</span><span class="params">(date)</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sec</span> = <span class="number">0</span>;</span><br><span class="line">str = num2str(date);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">str1 = str(<span class="number">1</span>:<span class="number">4</span>);     <span class="comment">%%年份</span></span><br><span class="line">str2 = str(<span class="number">5</span>:<span class="number">6</span>);     <span class="comment">%%月份</span></span><br><span class="line">str3 = str(<span class="number">7</span>:<span class="number">8</span>);     <span class="comment">%%日</span></span><br><span class="line">str4 = str(<span class="number">9</span>:<span class="number">10</span>);    <span class="comment">%%小时</span></span><br><span class="line">str5 = str(<span class="number">11</span>:<span class="number">12</span>);   <span class="comment">%%分钟</span></span><br><span class="line">str6 = str(<span class="number">13</span>:<span class="number">14</span>);   <span class="comment">%%秒</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%%%% 年份转换</span></span><br><span class="line"><span class="keyword">switch</span> str1</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;2018&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;2019&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">31536000</span>;        <span class="comment">%%%%365*24*60*60=31536000;一年有多少秒</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;2020&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">63072000</span>;        <span class="comment">%%%%18，19都是平年，365天</span></span><br><span class="line">    <span class="keyword">otherwise</span></span><br><span class="line">        <span class="built_in">sec</span> = NaN;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%%% 月份转换</span></span><br><span class="line"><span class="keyword">switch</span> str2</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;01&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">0</span>;               <span class="comment">%%% 一月</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;02&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">2678400</span>;         <span class="comment">%%%18,19是平年31*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;03&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">5097600</span>;         <span class="comment">%%% 三月(31+28)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;04&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">7776000</span>;         <span class="comment">%%% 四月(31+28+31)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;05&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">10368000</span>;         <span class="comment">%%% 五月(31+28+31+30)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;06&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">13046400</span>;         <span class="comment">%%% 六月(31+28+31+30+31)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;07&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">15638400</span>;         <span class="comment">%%% 七月(31+28+31+30+31+30)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;08&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">18316800</span>;         <span class="comment">%%% 八月(31+28+31+30+31+30+31)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;09&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">20995200</span>;         <span class="comment">%%% 九月(31+28+31+30+31+30+31+31)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;10&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">23587200</span>;         <span class="comment">%%% 十月(31+28+31+30+31+30+31+31+30)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;11&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">26265600</span>;         <span class="comment">%%% 十一月(31+28+31+30+31+30+31+31+30+31)*24*60*60</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;12&#x27;</span></span><br><span class="line">        <span class="built_in">sec</span> = <span class="built_in">sec</span> + <span class="number">28857600</span>;         <span class="comment">%%% 十二月(31+28+31+30+31+30+31+31+30+31+30)*24*60*60</span></span><br><span class="line">    <span class="keyword">otherwise</span></span><br><span class="line">        <span class="built_in">sec</span> = NaN;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%%% 日期转换</span></span><br><span class="line">day = str2double(str3);</span><br><span class="line"><span class="built_in">sec</span> = <span class="built_in">sec</span> + (day<span class="number">-1</span>)*<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">%%%% 小时转换</span></span><br><span class="line">hour = str2double(str4);</span><br><span class="line"><span class="built_in">sec</span> = <span class="built_in">sec</span> + hour*<span class="number">60</span>*<span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">%%%% 分钟转换</span></span><br><span class="line">minuter = str2double(str5);</span><br><span class="line"><span class="built_in">sec</span> = <span class="built_in">sec</span> + minuter*<span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">%%%% 秒</span></span><br><span class="line">second = str2double(str6);</span><br><span class="line"><span class="built_in">sec</span> = <span class="built_in">sec</span> + second;</span><br></pre></td></tr></table></figure>
<p>对各个车辆的时间属性变化进行观察，以确定在时间维度上，数据的缺失程度。</p>
<p><img src="%E8%BD%A6%E8%BE%861%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆1时间变化曲线"><img src="%E8%BD%A6%E8%BE%861%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆1时间差分曲线"></p>
<p>车辆1时间变化情况如上图所示，根据时间差分曲线上来看，时间维度上的间隔差距非常大，时间维度上数据丢失较为严重，同时考虑时间维度上已有数据缺失程度，车辆1数据不适用于建立相关模型，仅在有限条件下作为测试样本。</p>
<p><img src="%E8%BD%A6%E8%BE%862%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆2时间变化曲线"><img src="%E8%BD%A6%E8%BE%862%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆2时间差分曲线"></p>
<p>车辆2时间变化情况如上图所示，根据时间差分曲线上来看，时间维度上的间隔差距非常大，时间维度上数据丢失较为严重，同时考虑时间维度上已有数据缺失程度，车辆2数据不适用于建立相关模型，仅在有限条件下作为测试样本。</p>
<p><img src="%E8%BD%A6%E8%BE%863%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆3时间变化曲线"><img src="%E8%BD%A6%E8%BE%863%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆3时间差分曲线"><img src="%E8%BD%A6%E8%BE%863%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF2.png" alt="车辆3时间差分曲线2"></p>
<p>车辆3时间变化情况如上图所示，从时间变化曲线上看，时间基本呈线性增长，较为理想，从时间上的差分上看，时间间隔较为均衡，进一步处理后可进行相关模型的建立。</p>
<p><img src="%E8%BD%A6%E8%BE%864%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆4时间变化曲线"><img src="%E8%BD%A6%E8%BE%864%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆4时间差分曲线"></p>
<p>车辆4时间变化情况如上图所示，根据时间差分曲线上来看，最后一小段可以作为测试样本</p>
<p><img src="%E8%BD%A6%E8%BE%865%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆5时间变化曲线"><img src="%E8%BD%A6%E8%BE%865%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆5时间差分曲线"></p>
<p>车辆5时间变化情况如上图所示，根据时间差分曲线上来看，可以提交较多的测试或训练样本</p>
<p><img src="%E8%BD%A6%E8%BE%866%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆6时间变化曲线"><img src="%E8%BD%A6%E8%BE%866%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆6时间差分曲线"><img src="%E8%BD%A6%E8%BE%866%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF2.png" alt="车辆6时间差分曲线2"></p>
<p>车辆6时间变化情况如上图所示，从时间变化曲线上看线性增长部分较多，从时间差分曲线上看，可以有较多的训练样本。</p>
<p><img src="%E8%BD%A6%E8%BE%867%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆7时间变化曲线"><img src="%E8%BD%A6%E8%BE%867%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆7时间差分曲线"><img src="%E8%BD%A6%E8%BE%867%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF7.png" alt="车辆7时间差分曲线7"></p>
<p>车辆7时间变化情况如上图所示，根据时间差分曲线上来看，是十辆车中最为理想的一个数据样本，时间间隔差距较小，时间变化曲线线性度较好。</p>
<p><img src="%E8%BD%A6%E8%BE%868%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆8时间变化曲线"><img src="%E8%BD%A6%E8%BE%868%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆8时间差分曲线"></p>
<p>车辆8时间变化情况如上图所示，根据时间差分曲线上来看，可提取部分片段作为训练或测试样本。</p>
<p><img src="%E8%BD%A6%E8%BE%869%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF-16328329623001.png" alt="车辆9时间变化曲线"><img src="%E8%BD%A6%E8%BE%869%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF-16328329731242.png" alt="车辆9时间差分曲线"></p>
<p>车辆9时间变化情况如上图所示，根据时间差分曲线上来看，基本上没有规律性，该数据不可用。</p>
<p><img src="%E8%BD%A6%E8%BE%8610%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E6%9B%B2%E7%BA%BF.png" alt="车辆10时间变化曲线"><img src="../../../Desktop/data/%E8%BD%A6%E8%BE%8610%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF.png" alt="车辆10时间差分曲线"><img src="%E8%BD%A6%E8%BE%8610%E6%97%B6%E9%97%B4%E5%B7%AE%E5%88%86%E6%9B%B2%E7%BA%BF2.png" alt="车辆10时间差分曲线2"></p>
<p>车辆10时间变化情况如上图所示，根据时间差分曲线上来看，数据平稳增长部分较多，并且数据量最大，去除部分不合理数据后可以作为训练样本。</p>
<hr>
<p>根据时间维度上的数据缺失情况，时间维度上数量缺失程度远远要大于现有数据中元素缺失情况，而作为依赖时间序列的模型，主要关注于时间上的连续性，补充缺失数据对修正时间连续性的作用不大，收益太小，可之间删除部分元素缺失的样本。</p>
<p>经过上述观察分析，车辆3，车辆6，车辆7，车辆10是较为良好的数据集，但在时间序列上依然存在：</p>
<ol>
<li><p>时间增长为负，即车辆在上传数据时，信号传输有滞后，信号传输乱码等情况。</p>
</li>
<li><p>时间序列断层，数据的采样率是非常高的，根据国标GB/T 32960-2016，数据采样周期在1~30秒不等，当前数据集数据采样周期在10秒左右。而根据实际情况，车辆若干天不启动、穿过长隧道、停放于地下室等无法与服务器通信的情况是存在的。</p>
</li>
</ol>
<ol>
<li>数据逻辑冲突，例如电池单体最高，最低电量为0，里程数减少等情况。</li>
</ol>
<p>以车辆7为例，下图是时间序列局部图，可以看出局部时间序列并不连续，呈现离散形式，类似于AD转换，PWM模拟正弦波的形式。由此可见车辆9数据并不是个例，而是因为时间周期太短，采样点太少，车辆9数据相当于其他车辆数据的局部数据，根据上文对车辆9数据的判断，局部数据是混乱的，不可使用的。局部时间序列数据存在多个最值，即存在多个相同的时间点，无法确定该时间点具体的数据正确与否。</p>
<p><img src="%E6%97%A5%E6%9C%9F%E5%BA%8F%E5%88%97%E5%8F%98%E5%8C%96%E5%9B%BE.png" alt="日期序列变化图"></p>
<p>未进行时间格式转换时的时间序列变化，同样是十几二十小时内反复变化，故出现取值反复横跳情况，格式转换操作并没有出现错误</p>
<p><img src="image-20210929173356906.png" alt="image-20210929173356906"></p>
<p>根据时间序列离散，类似于AD转换，PWM模拟正弦波的形式，同时电流数据也有阶段化取值的趋势，可参考PWM，AD的思路，将一段在一定时间段反复跳动的数值认为是AD转换时的噪声，将这一段数据值采用均值代替，其他属性数据采用融合的方式进行数据的提取，以此来提取建立模型的样本数据。而这一思路的阻碍在于，数据不等长，如下图所示，时间上的落差值不相等，数据索引即数据量也不相等，需要合理的去确定一个时间间隔进行重采样，重采样应该要考虑在一时间间隔内数据情况，进行取值。</p>
<p><img src="%E7%A7%92%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%B1%80%E9%83%A8%E5%9B%BE.png" alt="秒时间序列局部图"></p>
<p><img src="image-20210929175735962.png" alt="image-20210929175735962"></p>
<p>接下来工作，还是提取有效样本。</p>
<ol>
<li><p>求出时间索引中，断层的边界，并分析样本其他数据的关系，进行数据合并。</p>
</li>
<li><p>设定合适时间单元，作为样本单元，构建时间连续的样本数据集。</p>
</li>
<li><p>对电流进行积分求当前电量，结合SoC求出当前电池的最大容量。并查阅相关资料，对应车辆的额定容量大小，通过公式求出SoH</p>
<script type="math/tex; mode=display">
SoC=\frac{Q_{disp}}{Q_{max}}
\\
SoH=\frac{Q_{max}}{Q_{nomin}}</script></li>
<li></li>
</ol>
<p>遇到的问题：</p>
<ol>
<li>这种方式会丢失很对的数据细节，包括后面故障标记，对故障的诊断不友好。</li>
<li></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://joyobama.github.io/2022/10/06/%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E6%97%A5%E5%BF%972021%E5%B9%B49%E6%9C%8827%E6%97%A5/" data-id="cl8x6hjq50007w0ocey5b3vbk" data-title="数据清洗日志2021年9月27日" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/10/06/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB2021%E5%B9%B49%E6%9C%8822%E6%97%A5/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          锂电池电化学文献
        
      </div>
    </a>
  
  
    <a href="/2022/10/06/%E8%AF%BE%E9%A2%98%E7%BB%84%E7%9B%AE%E6%A0%87%E6%9C%9F%E5%88%8A/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">课题组目标期刊</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/06/AD%E7%AE%80%E6%98%93%E6%95%99%E7%A8%8B/">AD简易教程</a>
          </li>
        
          <li>
            <a href="/2022/10/06/2022%E5%B9%B44%E6%9C%88FPGA%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E4%BA%9B%E9%94%99%E8%AF%AF%E8%A6%81%E7%82%B9/">要点总结</a>
          </li>
        
          <li>
            <a href="/2022/10/06/2021%E5%B9%B4%E8%AE%B0%E8%B4%A6/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/10/06/%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E6%9D%BF%E8%A7%84%E5%88%92/">信号处理板计划</a>
          </li>
        
          <li>
            <a href="/2022/10/06/%E6%96%B0%E8%83%BD%E6%BA%90%E6%B1%BD%E8%BD%A6%E7%94%B5%E6%B1%A0%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97/">新能源汽车电池数据清洗</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Joy_Obama<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>